= Guillotine - GraphQL Headless CMS for Enonic XP
:toc: left

== Introduction

Once assigned to your site, the guillotine application will generate dynamically a powerful GraphQL API that enables web-based access to all 
your editorial content.

Guillotine exposes the read-only part of the Enonic Content API, including access to the Enonic query language. 
Guillotine dynamically analyzes all available content types in the site and automatically generates a GraphQL API specific to your site. 
This gives you direct, typed and documented access to all content within the site. Including the ability to follow references, 
child items and access media directly.

== Compatibility

|===
|Version | XP Version | Download

|0.1.5
|>= 6.10.0
|http://repo.enonic.com/public/com/enonic/app/guillotine/0.1.5/graphiql-0.1.5.jar[Download]
|===

== Installation & Configuration

=== Installation

* Open the admin tool 'Applications'
* Search for the 'guillotine' application
* Click install

image::doc/img/installation.png[Installation,768,384]

=== Configuration

* Open the admin tool 'Content Studio'
* Edit your site
* Add the application 'Guillotine'

image::doc/img/configuration.png[Installation,768,576]

== Usage

INFO: Once configured, a new service 'graphql' is present under your site path: '/mysite/mypage/_/service/com.enonic.app.guillotine/graphql'.

=== GraphiQL

The easiest way to explore a GraphQL API is to use GraphiQL

==== Installation 

* Open the admin tool 'Applications'
* Search for the 'graphiql' application
* Click install
* Open the admin tool 'GraphiQL'

image::doc/img/graphiql.png[GraphiQL,768,384]

==== User Interface

The GraphQL service URL from one of your configured site should already be filled in the field 'Service Location'.

* The left part of GraphiQL is used to write your graphQL query
* The center part of GraphiQL is used to display the result of these queries
* The right part of GraphiQL is used to display a documentation generated from the GraphQL API.

==== Example 1: Retrieve the display name and type of the current content

* Send a query to retrieve the display name and type of the current content

----
{
  content {
    get {
      displayName
      type
    }
  }
}
----

image::doc/img/example1.png[Example 1,768,384]

==== Example 2: Retrieve the display name and type of the current content and its direct children

----
{
  content {
    get {
      displayName
      children {
        displayName
      }
    }
  }
}
----

image::doc/img/example2.png[Example 2,768,384]

==== Example 3: Retrieve the image contents and generate a URL to these images cropped to 800x200 px

----
{
  content {
    query(contentTypes:"media:image") {
      displayName
      ... on media_Image {
        imageUrl(scale:"block(800,200)",type:absolute)
      }
    }
  }
}
----

image::doc/img/example3.png[Example 3,768,384]

